<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escala de Corais</title>

    <link rel="stylesheet" href="CSS\style.css"> <!-- Folha de estilos CSS -->
    <style>
        :root {
            --marrom: #211800;
            --dourado: #e1ad2a;
            --branco: #ffffff;
            --cinza-claro: #f4f4f4;
            --cinza-escuro: #4e4e4e;
            --tempoliturgico: #4e0e70;
            --transicao: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        header {
            position: fixed;
            width: 100%;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg);
            display: flex;
            justify-content: center;
            padding: 20px;
            margin-top: 80px;;
        }

        .container {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 450px;
            text-align: center;
        }

        h1 {
            color: var(--tempoliturgico);
            font-size: 1.8rem;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        /* Destaque do Próximo */
        .highlight {
            background: var(--cinza-claro);
            border: 2px solid #4e0e70a6;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 25px;
        }

        .highlight .date {
            font-size: 0.9rem;
            color: #414141;
            text-transform: capitalize;
        }

        .highlight .name {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--tempoliturgico);
            display: block;
            margin: 5px 0;
        }

        /* Tabela Mensal */
        .month-title {
            font-weight: bold;
            color: var(--tempoliturgico);
            font-size: 1.2rem;
            margin: 15px 0 10px;
            display: block;
            text-transform: capitalize;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1rem;
            margin-bottom: 20px;
        }

        th {
            background: var(--tempoliturgico);
            padding: 10px;
            color: var(--branco);
        }

        td {
            border-bottom: 1px solid #8a8a8a;
            padding: 12px 8px;
            color: rgb(15, 15, 15);
        }

        .current-row {
            background-color: #ecdef0;
            font-weight: bold;
        }

        /* Botões */
        .controls {
            display: flex;
            gap: 8px;
        }

        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }

        .btn-next {
            background: var(--cinza-escuro);
            color: white;
        }

        .btn-today {
            background: var(--tempoliturgico);
            color: var(--branco);
            display: none;
        }

        button:hover {
            opacity: 0.8;
        }
    </style>

</head>

<body>

    <header>
        <div class="logo">PNSC</div>

        <button class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <nav>
            <ul class="nav-menu" id="nav-menu">
                <li><a href="#inicio">Início</a></li>
                <li><a href="#missas">Celebrações</a></li>
                <li><a href="#endereco">Endereço</a></li>
                <li><a href="#dizimo">Doação</a></li>
                <!-- <li><a href="login.html"><button class="login">Login</button></a></li> -->
            </ul>
        </nav>
    </header>

    <div class="container">
        <h1>Escala de Corais</h1>

        <div class="highlight">
            <div id="next-date-label" class="date">--</div>
            <span id="next-coral-name" class="name">--</span>
            <div id="next-info-label" style="font-size: 0.8rem; color: #888;">--</div>
        </div>

        <span id="month-name" class="month-title">--</span>
        <table>
            <thead>
                <tr>
                    <th>Dia</th>
                    <th>Domingo</th>
                    <th>Coral Responsável</th>
                </tr>
            </thead>
            <tbody id="month-table-body">
            </tbody>
        </table>

        <div class="controls">
            <button onclick="resetar()" class="btn-today">Voltar ao mês atual</button>
            <button onclick="navegar(1)" class="btn-next">Próximo Mês ➔</button>
        </div>
    </div>

    <script>
        let dataReferencia = new Date(); // Data que controla a visualização
        const corais = ["Aliança de Amor", "Yeshua", "Donum Dei (Dízimo)", "Pastoral Familiar", "Flor do Carmelo"];

        function init() {
            renderDestaque();
            renderTabelaMensal();
        }

        function renderDestaque() {
            let hoje = new Date();
            let alvo = new Date(hoje);

            // Ajusta para o próximo domingo se não for domingo
            if (alvo.getDay() !== 0) {
                alvo.setDate(hoje.getDate() + (7 - hoje.getDay()));
            }

            const numDomingo = Math.ceil(alvo.getDate() / 7);

            document.getElementById('next-date-label').innerText = "Coral do Próximo Domingo: " + alvo.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long' });
            document.getElementById('next-coral-name').innerText = corais[numDomingo - 1];
            document.getElementById('next-info-label').innerText = `Referente ao ${numDomingo}º domingo do mês`;
        }

        function renderTabelaMensal() {
            const corpoTabela = document.getElementById('month-table-body');
            corpoTabela.innerHTML = "";

            const mes = dataReferencia.getMonth();
            const ano = dataReferencia.getFullYear();

            document.getElementById('month-name').innerText = dataReferencia.toLocaleDateString('pt-BR', { month: 'long', year: 'numeric' });

            // Loop pelos dias do mês para achar os domingos
            let dataBusca = new Date(ano, mes, 1);
            let contadorDomingo = 1;

            while (dataBusca.getMonth() === mes) {
                if (dataBusca.getDay() === 0) {
                    const tr = document.createElement('tr');

                    // Destacar se for o próximo domingo cronológico
                    let hoje = new Date();
                    if (dataBusca.toDateString() === getProximoDomingo(hoje).toDateString()) {
                        tr.className = "current-row";
                    }

                    tr.innerHTML = `
                    <td>${dataBusca.getDate()}</td>
                    <td>${contadorDomingo}º</td>
                    <td>${corais[contadorDomingo - 1]}</td>
                `;
                    corpoTabela.appendChild(tr);
                    contadorDomingo++;
                }
                dataBusca.setDate(dataBusca.getDate() + 1);
            }
        }

        function getProximoDomingo(d) {
            let res = new Date(d);
            if (res.getDay() !== 0) res.setDate(d.getDate() + (7 - d.getDay()));
            return res;
        }

        const btnToday = document.querySelector('.btn-today');
        function navegar(direcao) {
            dataReferencia.setMonth(dataReferencia.getMonth() + direcao);
            renderTabelaMensal();
            btnToday.style.display = 'block';

        }

        function resetar() {
            dataReferencia = new Date();
            renderTabelaMensal();
            btnToday.style.display = 'none';
        }

        init();
    </script>
    <script src="JS/hamburger.js"></script>
</body>

</html>